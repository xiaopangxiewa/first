# 品牌车系阶段意图分类相关概念
    1.品牌车系：指一篇文章中所主要描述的一个或多个车辆的品牌以及所属车系，如宝马X5；
    2.阶段：指一辆车在市场中所属的阶段，包括概念车、谍照、新车发布、新车上市、召回这5个阶段；
    3.意图分类：指对一篇文章中不同的段落意图的进行分类，段落的意图包括：开头、外观、内饰、动力以及两种意图的复合；
    
#目的作用

    
    品牌车系阶段和意图分类的相关抽取为汽车文章改写的最初阶段（查看改写完整流程图），    是对文章及其段落的分类器，
    当目标数据源上有新的文章时，经过品牌车系阶段抽取出文章所介绍新车的车系、品牌以及所处阶段，再对文章内各个段落
    意图的进行分类，之后进入改写阶段，对不同的段落进行分别进行改写。
    
* [文章改写完整流程图](https://github.com/EigenLab/saber/blob/master/data/slot_based_rewrite_app_design.md)

#技能准备
    1.了解一下正则表达式对理解文件中的规则很有帮助，正则表达式快速入门可以阅读《正则表达式必知必会》。（随后会传到Github上）
    2.了解大黄蜂alpha版的使用以及debug工具。开通大黄蜂alpha版权限找邓鹏
* [大黄蜂alpha版网址点击此处](https://alpha-labs.aidigger.com/#/)

#项目各文件介绍

*[项目文件地址](https://github.com/EigenLab/bridge)

```
    1.项目所在地址：EigenLab/bridge，品牌、车系、阶段、意图分类所有有关的文件都在此项目文件夹下。
    2.在bridge的readme文件中，有关于汽车意图分类规则、品牌车系抽取的相关规则介绍。
    3.在bridge/data文件夹下的car_info.csv文件，是目前所有品牌车系的集合，并且在不断地更新中，对品牌车系的判断依赖此词表的完整性，如果品牌车系抽取的结果不正确，先在此文件中检查文章所介绍的车系是否已存在于该词表中，若无，则进行补充。
    4.在bridge/data文件夹下的car_stage_keywords文件，是对车系进行判断的正则表达式列表，简单来理解，当文章标题和第一段匹配到该文件下某关键词时，该篇文章就会被判断为某一阶段。
    5.在bridge/data/markdata下的car_info_labeled文件，是对品牌车系进行标注的数据集，品牌车系的标注规则见下文。
    6.在bridge/data/car_intent_keywords文件夹下的各文件，是判断意图的关键词列表，对段落意图的判断，取决于匹配到的关键词。
```
#车系品牌阶段标注

```
    1.	谍照类的文章，一般都有谍照图（带黑白花纹的车身涂装），或者配图非常模糊、在关键位置有遮挡，文中也会有谍照相关的字样。
    2.	新车发布：在车展上亮相，或者官方发布了详细配置和图片，新车发布另一个比较鲜明的特点是虽然有配置信息，但没有详细的售价。此外，新车在海外上市，在国内只属于新车发布阶段；
    3.	新车上市：新车上市一般都会有正式上市，并配有详细的价格信息；
    4.	概念车：车辆只有设计图、官方发布概念车等，都属于概念车阶段；
    5.	召回：文章明确提及召回，此类文章非常容易分辨；
    6.	如果仍无法明确区分车系阶段，可以查找原文详细阅读；
```

#车系品牌阶段抽取优化

```
    1.如果算法抽取结果与标注结果不一致，先查看原文检查自己的标注是否正确，确认无误打开大黄蜂alpha版debug工具；
    2.将标题和原文输入debug工具，检查算法抽取的过程，算法的原理大致如下：
    3.系品牌：按照频次确定文章品牌车系，检查标题和正文中各个品牌和车系出现的次数，筛选掉品牌和公司名称不在文中的车系，筛选掉相互之间具有包含关系的车系，计算最后剩下各个车系频数的平均数，最后大于平均数的车系就是最终抽取的车系，如果有多个大于平均数的车系，那么随机选择其中一个；
    4.阶段分类：按照正则表达式匹配，算法会搜索文章中的关键词与car_stage_keywords中的正则表达式进行匹配，匹配结果的充要条件是匹配到某一阶段的肯定规则并且没有匹配到该阶段的否定规则，实例如下：
   
        #概念车
        假想
        渲染
        设计图
        概念!正式亮相!亮相!实车!首秀!官图正式发布
        !(售价|价格)曝光
        
        1.带感叹号的为否定规则
        2.以概念车为例，匹配到“假想、渲染、设计图”三者中的任意一个时，并且没有匹配到“(售价|价格)曝光”时，最后算法的分类结果才是概念车。
        3.“概念!正式亮相!亮相!实车!首秀!官图正式发布”指匹配到概念，并且没有匹配到“正式亮相、亮相、实车、首秀、官图正式发布”时，才会被认为是概念车。
    
        
    5.对品牌车系抽取阶段抽取结果的优化，就是完善正则表达式中所没有的肯定规则和否定规则，对于标注结果和算法结果不一致的情况，检查原文用于确定阶段的关键字，在汽车之家用该关键字搜索，确认出现该关键词时是否一定代表某一阶段，有无相匹配的否定规则，确认通用性后，添加至car_stage_keywords中。
```
#段落意图分类优化
    
        1.段落分类的基本原理：根据car_intent_keyword文件夹下的几个文件中的关键词进行匹配。
        2.优化：完善关键词列表，对于算法分类失败的case，检查段落中的关键词是否在关键词词表中。
    
#抽取实例
    ```
        车系抽取结果:
        奔驰V级
        阶段分类结果:
        谍照
        标题:
        前脸设计有调整 曝奔驰新款V级测试谍照
        首段:
        [ 汽车之家 海外谍照 ]　日前，我们获得了一组 奔驰 新款V级的海外测试谍照，根据谍照显示，新车将对前脸做出一些调整。不过其他方面是否有变化目前尚不得知。
        正文:
        [ 汽车之家 海外谍照 ]　日前，我们获得了一组 奔驰 新款V级的海外测试谍照，根据谍照显示，新车将对前脸做出一些调整。不过其他方面是否有变化目前尚不得知。 
        友情提示 ：希望热心网友能够将您所 发现 的新车谍照拍摄下来，并发送到我们相应的邮箱内： diezhao@autohome.com.cn ，期待您的来信，并成为“谍报家”中的一员。 
        『 奔驰 新款V级测试谍照』 
        『 奔驰 现款V级』 
        谍照中的测试车前脸采用了一定伪装，不过我们仍能看出其前格栅的横条幅采用了更加粗壮的设计。同时，现款车型大灯组下方锋利的线条也被取消。预计伪装下的前保险杠造型会发生一些变化。 
        作为改款车型，新车的侧面及尾部并没有发生过多变化，熏黑的玻璃配合尾灯组的 LED 光带，具有较强的档次感。目前新车的更多消息尚未曝光，作为参考，现款车型提供2.0T汽油、2.1T柴油等动力。关于新车的更多消息，我们将持续关注。（谍照来源：东方ic；文/ 汽车之家 李长宁） 
        查看同类文章： 
        海外谍照 
        更多精彩内容： 
        海外售价 
        您怎么看 
        聊新车 
        >>汽车之家新闻-最快速最真实的报道 最深入最犀利的点评<<
        ```
# 大黄蜂alpha版debug工具使用详解
## 步骤一

![](https://raw.githubusercontent.com/xiaopangxiewa/first/master/step1.png)

## 步骤二

![](https://raw.githubusercontent.com/xiaopangxiewa/first/master/step2.png)

## 步骤三

![](https://raw.githubusercontent.com/xiaopangxiewa/first/master/step3.png)

## 步骤四
![](https://raw.githubusercontent.com/xiaopangxiewa/first/master/step4.png)
